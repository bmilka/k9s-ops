flux_reconcile:
  shortCut: r
  scopes:
    - gitrepositories
    - kustomizations
    - helmreleases
    - helmreleases
    - ocirepositories
  description: |
    Reconcile
  command: bash
  background: false
  args:
    - -c
    - >-
      case "$RESOURCE_NAME" in
        gitrepositories)  RESOURCE="source git";;
        kustomizations)   RESOURCE="kustomization";;
        helmreleases)     RESOURCE="helmrelease";;
        helmrepositories) RESOURCE="source helm";;
        ocirepositories)  RESOURCE="source oci";;
        *) echo "Unsupported resource: $RESOURCE_NAME" | less --CLEAR-SCREEN; exit 1;;
      esac;
      flux reconcile $RESOURCE
      --kubeconfig="$KUBECONFIG"
      --context="$CONTEXT"
      --namespace="$NAMESPACE"
      "$NAME"
